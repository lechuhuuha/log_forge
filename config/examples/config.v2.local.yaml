version: 2
server:
  addr: ":8083"
  readHeaderTimeout: 2s
  readTimeout: 10s
  writeTimeout: 10s
  idleTimeout: 60s
  requestTimeout: 5s
auth:
  enabled: false
  headerName: "X-API-Key"
  keys: []
storage:
  backend: file
  logsDir: "./logs"
  analyticsDir: "./analytics"
  minio:
    endpoint: "localhost:9000"
    bucket: "logforge"
    accessKey: "minioadmin"
    secretKey: "minioadmin"
    useSSL: false
    logsPrefix: "logs"
    analyticsPrefix: "analytics"
aggregation:
  interval: 30s
ingestion:
  queueBufferSize: 100000
  producerWorkers: 48
  producerWriteTimeout: 5s
  queueHighWaterPercent: 0.98
  syncOnIngest: true
  circuitFailureThreshold: 3
  circuitCooldown: 15s
consumer:
  flushSize: 4096
  flushInterval: 100ms
  persistTimeout: 5s
kafka:
  brokers:
    - localhost:19092
  topic: logs
  groupID: logs-consumer-group
  batchSize: 5000
  batchTimeout: 5ms
  batchBytes: 2000000
  compression: none
  async: false
  # use enough consumers to cover partitions and keep up with bursts
  consumers: 10
  requireAllAcks: true
